type: custom:layout-card
cards:
  - type: custom:layout-card
    layout_type: vertical
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template: remote
            variables:
              source: Shield
              name: TV
              script: turn_on_watch_living_room_tv
            icon: mdi:television
          - type: custom:button-card
            template: remote
            variables:
              source: PC
              name: Music
              script: turn_on_the_living_room_speakers
            icon: mdi:audio-video
            styles:
              icon:
                - color: |
                    [[[
                      var avr_attributes = states['media_player.denon_avr_x4300h'].attributes;
                      if (avr_attributes.source === variables.source
                          && avr_attributes.sound_mode == 'MCH STEREO') {
                        return 'var(--paper-item-icon-active-color)';
                      } else  {
                        return 'var(--paper-item-icon-color)';
                      }
                    ]]]
          - type: custom:button-card
            template: remote
            variables:
              source: PC
              name: Video Call
              script: turn_on_the_living_room_video_conferencing_system
            icon: mdi:video
            styles:
              icon:
                - color: |
                    [[[
                      var avr_attributes = states['media_player.denon_avr_x4300h'].attributes;
                      if (avr_attributes.source === variables.source
                          && avr_attributes.sound_mode == 'STEREO') {
                        return 'var(--paper-item-icon-active-color)';
                      } else  {
                        return 'var(--paper-item-icon-color)';
                      }
                    ]]]
          - type: custom:button-card
            template: remote
            variables:
              source: Switch
              name: Switch
              script: turn_on_the_nintendo_switch
            icon: mdi:nintendo-switch
          - type: custom:button-card
            template: remote
            variables:
              source: 'Off'
              name: Power Off
              script: turn_off_the_living_room_tv
            icon: mdi:power
      - type: custom:roku-card
        entity: media_player.shield
        remote_entity: remote.shield
        tv: true
        apps:
          - icon: mdi:netflix
            name: Netflix
            tap_action:
              action: call-service
              service: media_player.select_source
              service_data:
                entity_id: media_player.living_room_shield_tv
                source: Netflix
              haptic: success
          - icon: mdi:youtube
            name: YouTube
            tap_action:
              action: call-service
              service: media_player.select_source
              service_data:
                entity_id: media_player.living_room_shield_tv
                source: YouTube
              haptic: success
          - icon: mdi:plex
            name: Plex
            tap_action:
              action: call-service
              service: media_player.select_source
              service_data:
                entity_id: media_player.living_room_shield_tv
                source: Plex
              haptic: success
          - icon: mdi:microphone
            tap_action:
              action: call-service
              service: remote.send_command
              service_data:
                entity_id: remote.living_room_shield_tv
                command: SEARCH
              haptic: success
        power:
          show: false
          tap_action:
            action: call-service
            service: script.turn_on_watch_living_room_tv
            haptic: success
        volume_up:
          show: true
          tap_action:
            action: call-service
            service: media_player.volume_up
            service_data:
              entity_id: media_player.denon_avr_x4300h
            haptic: success
        volume_down:
          show: true
          tap_action:
            action: call-service
            service: media_player.volume_down
            service_data:
              entity_id: media_player.denon_avr_x4300h
            haptic: success
        volume_mute:
          show: true
          tap_action:
            action: call-service
            service: denonavr.get_command
            service_data:
              entity_id: media_player.denon_avr_x4300h
              command: /goform/formiPhoneAppDirect.xml?RCKSK0410370
            haptic: success
        up:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: DPAD_UP
            haptic: success
        down:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: DPAD_DOWN
            haptic: success
        left:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: DPAD_LEFT
            haptic: success
        right:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: DPAD_RIGHT
            haptic: success
        home:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: HOME
            haptic: success
        info:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: MENU
            haptic: success
        back:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: BACK
            haptic: success
        select:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: DPAD_CENTER
            haptic: success
        reverse:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: MEDIA_REWIND
            haptic: success
        play:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: MEDIA_PLAY_PAUSE
            haptic: success
        forward:
          show: true
          tap_action:
            action: call-service
            service: remote.send_command
            service_data:
              entity_id: remote.living_room_shield_tv
              command: MEDIA_FAST_FORWARD
            haptic: success
        haptic: success
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            template: light_button
            entity: media_player.living_room_sync_box
            icon: mdi:led-strip-variant
            name: Backlight
            tap_action:
              action: call-service
              service: media_player.media_play_pause
              service_data:
                entity_id: media_player.living_room_sync_box
              haptic: success
            state:
              - value: playing
                label: 'On'
                styles:
                  card:
                    - border: >-
                        solid 1px
                        var(--paper-item-icon-active-color)
                    - box-shadow: >-
                        0px 0px 10px 3px
                        var(--paper-item-icon-active-color)
                  label:
                    - color: var(--paper-item-icon-active-color)
              - operator: default
                label: 'Off'
                styles:
                  card:
                    - border: solid 1px var(--primary-color)
                    - box-shadow: none
            styles:
              card:
                - height: 100px
          - type: custom:decluttering-card
            template: slider_button_card
            variables:
              - entity: light.living_room_lights
              - name: Ceiling
          - type: custom:decluttering-card
            template: slider_button_card
            variables:
              - entity: light.hallway_lights
              - name: Hallway
          - type: custom:decluttering-card
            template: slider_button_card
            variables:
              - entity: light.kitchen_lights
              - name: Kitchen
    view_layout:
      grid_area: left
layout_type: custom:grid-layout
layout:
  grid-template-columns: 1fr
  grid-template-rows: auto
  grid-template-areas: |
    "left"
  mediaquery:
    '(max-width: 800px)':
      grid-template-columns: 1fr
      grid-template-areas: |
        "left"
view_layout:
  grid-area: main